{"version":3,"file":"visual.js","mappings":"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","sources":["webpack:///./src/visual.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./.tmp/precompile/visualPlugin.ts"],"sourcesContent":["\"use strict\";\n\nimport powerbi from \"powerbi-visuals-api\";\nimport VisualConstructorOptions = powerbi.extensibility.visual.VisualConstructorOptions;\nimport VisualUpdateOptions = powerbi.extensibility.visual.VisualUpdateOptions;\nimport IVisual = powerbi.extensibility.visual.IVisual;\n\nimport \"../style/visual.less\";\n\nexport class Visual implements IVisual {\n    private target: HTMLElement;\n    private svg: SVGSVGElement;\n    private mainGroup: SVGGElement;\n    \n    // Éléments graphiques\n    private pathArea: SVGPathElement;\n    private pathLine: SVGPathElement;\n    private gradientStopTop: SVGStopElement;\n    private gradientStopBottom: SVGStopElement;\n    private axisGroup: SVGGElement;\n\n    // Marges (Right 40 pour ne pas couper la fin, Left 60 pour les grands chiffres)\n    private margin = { top: 20, right: 40, bottom: 40, left: 60 };\n\n    constructor(options: VisualConstructorOptions) {\n        this.target = options.element;\n\n        // 1. Création du SVG\n        const ns = \"http://www.w3.org/2000/svg\";\n        this.svg = document.createElementNS(ns, \"svg\");\n        this.svg.classList.add(\"chart-container\");\n        this.target.appendChild(this.svg);\n\n        // 2. Définition du Dégradé (Style Axonaut)\n        const defs = document.createElementNS(ns, \"defs\");\n        const gradient = document.createElementNS(ns, \"linearGradient\");\n        gradient.setAttribute(\"id\", \"axonautGradient\");\n        gradient.setAttribute(\"x1\", \"0\");\n        gradient.setAttribute(\"y1\", \"0\");\n        gradient.setAttribute(\"x2\", \"0\");\n        gradient.setAttribute(\"y2\", \"1\"); // Vertical\n\n        // Haut : Bleu semi-transparent\n        this.gradientStopTop = document.createElementNS(ns, \"stop\");\n        this.gradientStopTop.setAttribute(\"offset\", \"0%\");\n        this.gradientStopTop.setAttribute(\"stop-opacity\", \"0.3\");\n\n        // Bas : Transparent\n        this.gradientStopBottom = document.createElementNS(ns, \"stop\");\n        this.gradientStopBottom.setAttribute(\"offset\", \"100%\");\n        this.gradientStopBottom.setAttribute(\"stop-opacity\", \"0.0\");\n\n        gradient.appendChild(this.gradientStopTop);\n        gradient.appendChild(this.gradientStopBottom);\n        defs.appendChild(gradient);\n        this.svg.appendChild(defs);\n\n        // 3. Groupes\n        this.mainGroup = document.createElementNS(ns, \"g\");\n        this.axisGroup = document.createElementNS(ns, \"g\");\n        \n        this.mainGroup.appendChild(this.axisGroup);\n        \n        // Aire (Fond dégradé)\n        this.pathArea = document.createElementNS(ns, \"path\");\n        this.pathArea.setAttribute(\"fill\", \"url(#axonautGradient)\");\n        this.pathArea.setAttribute(\"stroke\", \"none\");\n        this.mainGroup.appendChild(this.pathArea);\n\n        // Ligne (Trait bleu)\n        this.pathLine = document.createElementNS(ns, \"path\");\n        this.pathLine.setAttribute(\"fill\", \"none\");\n        this.pathLine.setAttribute(\"stroke-width\", \"3\");\n        this.pathLine.setAttribute(\"stroke-linecap\", \"round\");\n        this.pathLine.setAttribute(\"stroke-linejoin\", \"round\");\n        this.mainGroup.appendChild(this.pathLine);\n\n        this.svg.appendChild(this.mainGroup);\n    }\n\n    public update(options: VisualUpdateOptions) {\n        // Redimensionnement du SVG\n        this.svg.setAttribute(\"width\", options.viewport.width.toString());\n        this.svg.setAttribute(\"height\", options.viewport.height.toString());\n\n        // A. Récupération des données\n        const dataView = options.dataViews[0];\n        if (!dataView || !dataView.categorical) return;\n        if (!dataView.categorical.categories || !dataView.categorical.values) return;\n\n        const cats = dataView.categorical.categories[0].values;\n        const vals = dataView.categorical.values[0].values;\n\n        // B. Gestion de la couleur (Bleu par défaut)\n        let color = \"#3B60C4\"; \n        if(dataView.metadata.objects && dataView.metadata.objects.lineSettings) {\n             // Si vous avez gardé le menu de couleur, décommentez ceci :\n             // color = (dataView.metadata.objects.lineSettings.lineColor as any).solid.color;\n        }\n        \n        this.pathLine.setAttribute(\"stroke\", color);\n        this.gradientStopTop.setAttribute(\"stop-color\", color);\n        this.gradientStopBottom.setAttribute(\"stop-color\", color);\n\n        // C. Calcul des dimensions de la zone de dessin\n        const width = options.viewport.width;\n        const height = options.viewport.height;\n        const drawW = width - this.margin.left - this.margin.right;\n        const drawH = height - this.margin.top - this.margin.bottom;\n\n        // D. CALCUL DE L'ÉCHELLE Y (PALIERS DE 5000)\n        let maxDataVal = 0;\n        vals.forEach(v => { if(Number(v) > maxDataVal) maxDataVal = Number(v); });\n        \n        const stepSize = 5000;\n        // On arrondit au multiple de 5000 supérieur (ex: 23000 -> 25000)\n        let niceMax = Math.ceil(maxDataVal / stepSize) * stepSize;\n        if (niceMax === 0) niceMax = stepSize; \n\n        // E. Calcul des points (X, Y) en pixels\n        const points: [number, number][] = cats.map((cat, i) => {\n            const x = (i / (cats.length - 1)) * drawW;\n            // Attention : on divise par niceMax pour que la courbe s'aligne sur la grille\n            const y = drawH - (Number(vals[i]) / niceMax * drawH);\n            return [x, y];\n        });\n\n        // F. DESSIN\n        this.mainGroup.setAttribute(\"transform\", `translate(${this.margin.left}, ${this.margin.top})`);\n        this.axisGroup.innerHTML = \"\"; // On vide avant de redessiner\n\n        const ns = \"http://www.w3.org/2000/svg\";\n\n        // 1. DESSINER LA GRILLE Y (Boucle de 5000 en 5000)\n        for(let val = 0; val <= niceMax; val += stepSize) {\n            \n            // Position Y en pixels\n            const yPos = drawH - (val / niceMax * drawH);\n\n            // Ligne horizontale pointillée\n            const line = document.createElementNS(ns, \"line\");\n            line.setAttribute(\"x1\", \"0\");\n            line.setAttribute(\"x2\", drawW.toString());\n            line.setAttribute(\"y1\", yPos.toString());\n            line.setAttribute(\"y2\", yPos.toString());\n            line.classList.add(\"grid-line\"); // Défini dans visual.less\n            this.axisGroup.appendChild(line);\n\n            // Texte (ex: 25 000)\n            const text = document.createElementNS(ns, \"text\");\n            text.setAttribute(\"x\", \"-10\"); // Un peu à gauche de l'axe\n            text.setAttribute(\"y\", yPos.toString());\n            text.setAttribute(\"text-anchor\", \"end\"); // Aligné à droite\n            text.setAttribute(\"alignment-baseline\", \"middle\"); // Centré verticalement\n            \n            text.textContent = this.formatNumber(val); // Fonction perso sans \"k\"\n            \n            text.classList.add(\"axis-text\");\n            this.axisGroup.appendChild(text);\n        }\n\n        // 2. DESSINER L'AXE X (DATES)\n        points.forEach((p, i) => {\n            // Logique pour ne pas surcharger l'axe si beaucoup de points\n            const step = Math.ceil(cats.length / 10); \n            if (i % step !== 0 && i !== cats.length - 1) return; \n            \n            const text = document.createElementNS(ns, \"text\");\n            text.setAttribute(\"x\", p[0].toString());\n            text.setAttribute(\"y\", (drawH + 20).toString()); // Sous le graphique\n            \n            // Alignement intelligent pour ne pas couper les bords\n            if (i === cats.length - 1) {\n                text.setAttribute(\"text-anchor\", \"end\"); // Le dernier aligné à droite\n            } else if (i === 0) {\n                text.setAttribute(\"text-anchor\", \"start\"); // Le premier aligné à gauche\n            } else {\n                text.setAttribute(\"text-anchor\", \"middle\");\n            }\n            \n            text.textContent = this.formatDate(cats[i].toString()); // Fonction perso date fr\n            \n            text.classList.add(\"axis-text\");\n            this.axisGroup.appendChild(text);\n        });\n\n        // 3. TRACÉ DES LIGNES ET AIRES (Traits droits)\n        if (points.length > 1) {\n            // Construction du chemin SVG (M = Move, L = Line)\n            let d = `M ${points[0][0]},${points[0][1]}`;\n            for (let i = 1; i < points.length; i++) {\n                d += ` L ${points[i][0]},${points[i][1]}`;\n            }\n            \n            // Appliquer à la ligne\n            this.pathLine.setAttribute(\"d\", d);\n\n            // Appliquer à l'aire (on ferme le polygone en bas)\n            const firstX = points[0][0];\n            const lastX = points[points.length-1][0];\n            const areaData = `${d} L ${lastX},${drawH} L ${firstX},${drawH} Z`;\n            this.pathArea.setAttribute(\"d\", areaData);\n        }\n    }\n\n    // --- FONCTIONS UTILITAIRES ---\n\n    private formatNumber(num: number): string {\n        // Formate en entier avec espaces (ex: \"25 000\")\n        return Math.round(num).toLocaleString('fr-FR');\n    }\n\n    private formatDate(value: string): string {\n        // Tente de convertir en date \"Janv. 2023\"\n        const date = new Date(value);\n        if (isNaN(date.getTime())) return value;\n        try {\n            return new Intl.DateTimeFormat('fr-FR', { month: 'short', year: 'numeric' }).format(date);\n        } catch (e) {\n            return value;\n        }\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Visual } from \"../../src/visual\";\nimport powerbiVisualsApi from \"powerbi-visuals-api\";\nimport IVisualPlugin = powerbiVisualsApi.visuals.plugins.IVisualPlugin;\nimport VisualConstructorOptions = powerbiVisualsApi.extensibility.visual.VisualConstructorOptions;\nimport DialogConstructorOptions = powerbiVisualsApi.extensibility.visual.DialogConstructorOptions;\nvar powerbiKey: any = \"powerbi\";\nvar powerbi: any = window[powerbiKey];\nvar courbedegrade0E5B94303DBB4B71884B9B500B8496FB_DEBUG: IVisualPlugin = {\n    name: 'courbedegrade0E5B94303DBB4B71884B9B500B8496FB_DEBUG',\n    displayName: 'courbedegrade',\n    class: 'Visual',\n    apiVersion: '5.3.0',\n    create: (options?: VisualConstructorOptions) => {\n        if (Visual) {\n            return new Visual(options);\n        }\n        throw 'Visual instance not found';\n    },\n    createModalDialog: (dialogId: string, options: DialogConstructorOptions, initialState: object) => {\n        const dialogRegistry = (<any>globalThis).dialogRegistry;\n        if (dialogId in dialogRegistry) {\n            new dialogRegistry[dialogId](options, initialState);\n        }\n    },\n    custom: true\n};\nif (typeof powerbi !== \"undefined\") {\n    powerbi.visuals = powerbi.visuals || {};\n    powerbi.visuals.plugins = powerbi.visuals.plugins || {};\n    powerbi.visuals.plugins[\"courbedegrade0E5B94303DBB4B71884B9B500B8496FB_DEBUG\"] = courbedegrade0E5B94303DBB4B71884B9B500B8496FB_DEBUG;\n}\nexport default courbedegrade0E5B94303DBB4B71884B9B500B8496FB_DEBUG;"],"names":[],"ignoreList":[],"sourceRoot":""}