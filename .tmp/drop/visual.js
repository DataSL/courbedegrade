var courbedegrade0E5B94303DBB4B71884B9B500B8496FB;(()=>{"use strict";var t={214:(t,e,i)=>{i.d(e,{S:()=>h});var s=i(674),a=s.z.Tn,n=s.z.Kx;class l extends a{lineColor=new s.z.sk({name:"lineColor",displayName:"Couleur de la ligne",value:{value:"#3B60C4"}});strokeWidth=new s.z.iB({name:"strokeWidth",displayName:"Ã‰paisseur",value:3});showMarkers=new s.z.jF({name:"showMarkers",displayName:"Afficher les marqueurs",value:!1});markerSize=new s.z.iB({name:"markerSize",displayName:"Taille des marqueurs",value:5});lineStyle=new s.z.PA({name:"lineStyle",displayName:"Style de ligne",items:[{value:"solid",displayName:"Continu"},{value:"dashed",displayName:"PointillÃ©s"},{value:"dotted",displayName:"Points"}],value:{value:"solid",displayName:"Continu"}});stepped=new s.z.jF({name:"stepped",displayName:"Ligne en escalier",value:!1});slices=[this.lineColor,this.strokeWidth,this.lineStyle,this.showMarkers,this.markerSize,this.stepped];constructor(t,e,i){super(),this.name=t,this.displayName=e,this.lineColor.value.value=i}}class o extends a{showGradient=new s.z.jF({name:"showGradient",displayName:"Afficher le dÃ©gradÃ©",value:!0});gradientColor=new s.z.sk({name:"gradientColor",displayName:"Couleur du dÃ©gradÃ©",value:{value:"#3B60C4"}});gradientIntensity=new s.z.iB({name:"gradientIntensity",displayName:"IntensitÃ© (0-1)",value:.3});gradientDirection=new s.z.PA({name:"gradientDirection",displayName:"Direction",items:[{value:"vertical",displayName:"Haut â†’ Bas"},{value:"vertical-reverse",displayName:"Bas â†’ Haut"},{value:"horizontal",displayName:"Gauche â†’ Droite"},{value:"horizontal-reverse",displayName:"Droite â†’ Gauche"},{value:"diagonal",displayName:"Diagonale â†˜"},{value:"diagonal-reverse",displayName:"Diagonale â†™"}],value:{value:"vertical",displayName:"Haut â†’ Bas"}});slices=[this.showGradient,this.gradientColor,this.gradientIntensity,this.gradientDirection];constructor(t,e,i){super(),this.name=t,this.displayName=e,this.gradientColor.value.value=i}}class r extends a{show=new s.z.jF({name:"show",displayName:"Afficher l'axe X",value:!0});axisColor=new s.z.sk({name:"axisColor",displayName:"Couleur",value:{value:"#666666"}});fontSize=new s.z.iB({name:"fontSize",displayName:"Taille du texte",value:11});fontFamily=new s.z.PA({name:"fontFamily",displayName:"Famille de police",items:[{value:"Segoe UI",displayName:"Segoe UI"},{value:"Arial",displayName:"Arial"},{value:"Courier New",displayName:"Courier New"},{value:"Georgia",displayName:"Georgia"},{value:"Verdana",displayName:"Verdana"}],value:{value:"Segoe UI",displayName:"Segoe UI"}});title=new s.z.jF({name:"title",displayName:"Afficher le titre",value:!1});titleText=new s.z.ks({name:"titleText",displayName:"Texte du titre",value:"",placeholder:"Titre de l'axe X"});name="xAxisSettings";displayName="Axe X";slices=[this.show,this.axisColor,this.fontSize,this.fontFamily,this.title,this.titleText]}class d extends a{show=new s.z.jF({name:"show",displayName:"Afficher l'axe Y",value:!0});axisColor=new s.z.sk({name:"axisColor",displayName:"Couleur",value:{value:"#666666"}});fontSize=new s.z.iB({name:"fontSize",displayName:"Taille du texte",value:11});fontFamily=new s.z.PA({name:"fontFamily",displayName:"Famille de police",items:[{value:"Segoe UI",displayName:"Segoe UI"},{value:"Arial",displayName:"Arial"},{value:"Courier New",displayName:"Courier New"},{value:"Georgia",displayName:"Georgia"},{value:"Verdana",displayName:"Verdana"}],value:{value:"Segoe UI",displayName:"Segoe UI"}});title=new s.z.jF({name:"title",displayName:"Afficher le titre",value:!1});titleText=new s.z.ks({name:"titleText",displayName:"Texte du titre",value:"",placeholder:"Titre de l'axe Y"});displayUnits=new s.z.PA({name:"displayUnits",displayName:"UnitÃ©s d'affichage",items:[{value:"0",displayName:"Auto"},{value:"1",displayName:"Aucun"},{value:"1000",displayName:"Milliers (K)"},{value:"1000000",displayName:"Millions (M)"},{value:"1000000000",displayName:"Milliards (Mds)"}],value:{value:"0",displayName:"Auto"}});precision=new s.z.iB({name:"precision",displayName:"DÃ©cimales",value:0});useYAxisBis=new s.z.jF({name:"useYAxisBis",displayName:"Afficher axe Y bis",value:!1});name="yAxisSettings";displayName="Axe Y";slices=[this.show,this.axisColor,this.fontSize,this.fontFamily,this.displayUnits,this.precision,this.title,this.titleText,this.useYAxisBis]}class c extends a{showHorizontal=new s.z.jF({name:"showHorizontal",displayName:"Grille horizontale",value:!0});showVertical=new s.z.jF({name:"showVertical",displayName:"Grille verticale",value:!1});gridColor=new s.z.sk({name:"gridColor",displayName:"Couleur de la grille",value:{value:"#f0f0f0"}});gridThickness=new s.z.iB({name:"gridThickness",displayName:"Ã‰paisseur",value:1});gridStyle=new s.z.PA({name:"gridStyle",displayName:"Style",items:[{value:"solid",displayName:"Continu"},{value:"dashed",displayName:"PointillÃ©s"}],value:{value:"dashed",displayName:"PointillÃ©s"}});name="gridSettings";displayName="Grille";slices=[this.showHorizontal,this.showVertical,this.gridColor,this.gridThickness,this.gridStyle]}class u extends a{show=new s.z.jF({name:"show",displayName:"Afficher les Ã©tiquettes",value:!1});color=new s.z.sk({name:"color",displayName:"Couleur",value:{value:"#000000"}});fontSize=new s.z.iB({name:"fontSize",displayName:"Taille du texte",value:9});fontFamily=new s.z.PA({name:"fontFamily",displayName:"Famille de police",items:[{value:"Segoe UI",displayName:"Segoe UI"},{value:"Arial",displayName:"Arial"},{value:"Courier New",displayName:"Courier New"}],value:{value:"Segoe UI",displayName:"Segoe UI"}});displayUnits=new s.z.PA({name:"displayUnits",displayName:"UnitÃ©s d'affichage",items:[{value:"0",displayName:"Auto"},{value:"1",displayName:"Aucun"},{value:"1000",displayName:"Milliers (K)"},{value:"1000000",displayName:"Millions (M)"},{value:"1000000000",displayName:"Milliards (Mds)"}],value:{value:"0",displayName:"Auto"}});precision=new s.z.iB({name:"precision",displayName:"DÃ©cimales",value:0});name="dataLabels";displayName="Ã‰tiquettes de donnÃ©es";slices=[this.show,this.color,this.fontSize,this.fontFamily,this.displayUnits,this.precision]}class g extends a{show=new s.z.jF({name:"show",displayName:"Afficher la lÃ©gende",value:!0});position=new s.z.PA({name:"position",displayName:"Position",items:[{value:"Top",displayName:"Haut"},{value:"Bottom",displayName:"Bas"},{value:"Left",displayName:"Gauche"},{value:"Right",displayName:"Droite"},{value:"TopCenter",displayName:"Haut centre"},{value:"BottomCenter",displayName:"Bas centre"}],value:{value:"Top",displayName:"Haut"}});fontColor=new s.z.sk({name:"fontColor",displayName:"Couleur",value:{value:"#666666"}});fontSize=new s.z.iB({name:"fontSize",displayName:"Taille du texte",value:10});fontFamily=new s.z.PA({name:"fontFamily",displayName:"Famille de police",items:[{value:"Segoe UI",displayName:"Segoe UI"},{value:"Arial",displayName:"Arial"},{value:"Courier New",displayName:"Courier New"}],value:{value:"Segoe UI",displayName:"Segoe UI"}});name="legend";displayName="LÃ©gende";slices=[this.show,this.position,this.fontColor,this.fontSize,this.fontFamily]}class h extends n{defaultColors=["#3B60C4","#E94F37","#44BBA4","#F7B538","#DB5461","#3F88C5","#7D4E57","#D66853","#212D40","#11151C"];lineSettings1=new l("lineSettings1","Ligne 1",this.defaultColors[0]);gradientSettings1=new o("gradientSettings1","DÃ©gradÃ© 1",this.defaultColors[0]);lineSettings2=new l("lineSettings2","Ligne 2",this.defaultColors[1]);gradientSettings2=new o("gradientSettings2","DÃ©gradÃ© 2",this.defaultColors[1]);lineSettings3=new l("lineSettings3","Ligne 3",this.defaultColors[2]);gradientSettings3=new o("gradientSettings3","DÃ©gradÃ© 3",this.defaultColors[2]);lineSettings4=new l("lineSettings4","Ligne 4",this.defaultColors[3]);gradientSettings4=new o("gradientSettings4","DÃ©gradÃ© 4",this.defaultColors[3]);lineSettings5=new l("lineSettings5","Ligne 5",this.defaultColors[4]);gradientSettings5=new o("gradientSettings5","DÃ©gradÃ© 5",this.defaultColors[4]);lineSettings6=new l("lineSettings6","Ligne 6",this.defaultColors[5]);gradientSettings6=new o("gradientSettings6","DÃ©gradÃ© 6",this.defaultColors[5]);lineSettings7=new l("lineSettings7","Ligne 7",this.defaultColors[6]);gradientSettings7=new o("gradientSettings7","DÃ©gradÃ© 7",this.defaultColors[6]);lineSettings8=new l("lineSettings8","Ligne 8",this.defaultColors[7]);gradientSettings8=new o("gradientSettings8","DÃ©gradÃ© 8",this.defaultColors[7]);lineSettings9=new l("lineSettings9","Ligne 9",this.defaultColors[8]);gradientSettings9=new o("gradientSettings9","DÃ©gradÃ© 9",this.defaultColors[8]);lineSettings10=new l("lineSettings10","Ligne 10",this.defaultColors[9]);gradientSettings10=new o("gradientSettings10","DÃ©gradÃ© 10",this.defaultColors[9]);xAxisSettings=new r;yAxisSettings=new d;gridSettings=new c;dataLabels=new u;legend=new g;cards=[this.lineSettings1,this.gradientSettings1,this.lineSettings2,this.gradientSettings2,this.lineSettings3,this.gradientSettings3,this.lineSettings4,this.gradientSettings4,this.lineSettings5,this.gradientSettings5,this.lineSettings6,this.gradientSettings6,this.lineSettings7,this.gradientSettings7,this.lineSettings8,this.gradientSettings8,this.lineSettings9,this.gradientSettings9,this.lineSettings10,this.gradientSettings10,this.xAxisSettings,this.yAxisSettings,this.gridSettings,this.dataLabels,this.legend]}},279:(t,e,i)=>{i.d(e,{b:()=>n});var s=i(214),a=i(674);class n{target;svg;mainGroup;axisGroup;linesGroup;tooltip;margin={top:20,right:40,bottom:40,left:60};formattingSettings;formattingSettingsService;host;selectionManager;dataView;licenseManager;currentUserValidPlans;hasServicePlans;isLicenseUnsupportedEnv;isNotificationDisplayed=!1;defaultNotificationType=0;constructor(t){this.target=t.element,this.host=t.host,this.selectionManager=this.host.createSelectionManager(),this.formattingSettingsService=new a.O,this.target.style.position="relative";const e="http://www.w3.org/2000/svg";this.svg=document.createElementNS(e,"svg"),this.svg.classList.add("chart-container"),this.target.appendChild(this.svg),this.tooltip=document.createElement("div"),this.tooltip.className="custom-tooltip",this.tooltip.style.position="absolute",this.tooltip.style.display="none",this.tooltip.style.background="rgba(0, 0, 0, 0.8)",this.tooltip.style.color="white",this.tooltip.style.padding="8px 12px",this.tooltip.style.borderRadius="4px",this.tooltip.style.fontSize="12px",this.tooltip.style.pointerEvents="none",this.tooltip.style.zIndex="1000",this.tooltip.style.whiteSpace="nowrap",this.target.appendChild(this.tooltip);const i=document.createElementNS(e,"defs");this.svg.appendChild(i),this.mainGroup=document.createElementNS(e,"g"),this.axisGroup=document.createElementNS(e,"g"),this.linesGroup=document.createElementNS(e,"g"),this.mainGroup.appendChild(this.axisGroup),this.mainGroup.appendChild(this.linesGroup),this.svg.appendChild(this.mainGroup),this.svg.addEventListener("contextmenu",t=>{const e=t;this.selectionManager.showContextMenu({},{x:e.clientX,y:e.clientY}),t.preventDefault()}),this.svg.addEventListener("click",()=>{this.selectionManager.clear()}),this.licenseManager=this.host.licenseManager,this.retrieveLicenseInfo()}retrieveLicenseInfo(){this.checkLicenseInProduction(),console.log("ðŸ”“ Mode dÃ©veloppement : VÃ©rification de licence dÃ©sactivÃ©e"),this.hasServicePlans=!0,this.isLicenseUnsupportedEnv=!1}checkLicenseInProduction(){if(!this.licenseManager)return console.log("â„¹ï¸ Gestionnaire de licences non disponible - mode Desktop/Dev"),this.hasServicePlans=!0,void(this.isLicenseUnsupportedEnv=!1);this.licenseManager.getAvailableServicePlans().then(t=>{const{plans:e,isLicenseUnsupportedEnv:i,isLicenseInfoAvailable:s}=t;console.log("ðŸ”‘ Informations de licence rÃ©cupÃ©rÃ©es:",{plans:e,isLicenseUnsupportedEnv:i,isLicenseInfoAvailable:s}),s&&!i&&(this.currentUserValidPlans=e?.filter(({state:t,spIdentifier:e})=>["customtableplan"].includes(e)&&(1===t||2===t)),this.hasServicePlans=!!this.currentUserValidPlans?.length,this.hasServicePlans?console.log(`âœ… ${this.currentUserValidPlans.length} plan(s) de service valide(s) trouvÃ©(s)`):console.warn("âš ï¸ Aucun plan de service valide trouvÃ©")),this.isLicenseUnsupportedEnv=i,this.notifyLicenseStatus()}).catch(t=>{console.error("âŒ Erreur lors de la rÃ©cupÃ©ration des licences:",t),this.currentUserValidPlans=void 0,this.hasServicePlans=void 0})}notifyLicenseStatus(){this.licenseManager&&this.licenseManager.clearLicenseNotification().catch(t=>console.log("Erreur lors du nettoyage des notifications:",t)),this.isLicenseUnsupportedEnv?this.showUnsupportedEnvNotification():!1!==this.hasServicePlans?!0===this.hasServicePlans&&(this.isNotificationDisplayed=!1,console.log("âœ… Licence valide - Visuel fonctionnel")):this.showLicenseRequiredNotification()}showUnsupportedEnvNotification(){this.licenseManager&&!this.isNotificationDisplayed&&this.licenseManager.notifyLicenseRequired(1).then(t=>{this.isNotificationDisplayed=t,t&&console.log("ðŸ“¢ Notification affichÃ©e : Environnement non supportÃ©")}).catch(t=>console.error("Erreur lors de l'affichage de la notification:",t))}showLicenseRequiredNotification(){this.licenseManager&&!this.isNotificationDisplayed&&this.licenseManager.notifyLicenseRequired(2).then(t=>{this.isNotificationDisplayed=t,t&&console.log("ðŸ“¢ Notification affichÃ©e : Licence requise")}).catch(t=>console.error("Erreur lors de l'affichage de la notification:",t))}notifyFeatureBlocked(t){if(!this.licenseManager)return;const e=`La fonctionnalitÃ© "${t}" nÃ©cessite une licence valide.`;this.licenseManager.notifyFeatureBlocked(e).then(e=>{e&&console.log(`ðŸ“¢ FonctionnalitÃ© bloquÃ©e : ${t}`)}).catch(t=>console.error("Erreur lors de l'affichage de la notification:",t))}showTooltip(t,e,i){for(;this.tooltip.firstChild;)this.tooltip.removeChild(this.tooltip.firstChild);const s=/<div[^>]*>(.*?)<\/div>/g;let a;for(;null!==(a=s.exec(i));){const t=document.createElement("div"),e=/<strong[^>]*>(.*?)<\/strong>/,i=e.exec(a[1]);if(i){const s=document.createElement("strong");s.textContent=i[1],t.appendChild(s);const n=a[1].replace(e,"");n.trim()&&t.appendChild(document.createTextNode(n))}else t.textContent=a[1];this.tooltip.appendChild(t)}this.tooltip.style.display="block",this.tooltip.style.left=t+10+"px",this.tooltip.style.top=e-10+"px"}hideTooltip(){this.tooltip.style.display="none"}getNiceStep(t){if(0===t)return 1;const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),s=[1,2,2.5,5,10];for(let e of s){const s=e*i,a=Math.ceil(t/s);if(a>=4&&a<=8)return s}return i}update(t){const e="http://www.w3.org/2000/svg";if(!1===this.hasServicePlans||!0===this.isLicenseUnsupportedEnv){for(;this.axisGroup.firstChild;)this.axisGroup.removeChild(this.axisGroup.firstChild);for(;this.linesGroup.firstChild;)this.linesGroup.removeChild(this.linesGroup.firstChild);return this.svg.setAttribute("width",t.viewport.width.toString()),void this.svg.setAttribute("height",t.viewport.height.toString())}const i=t.dataViews[0];if(!i||!i.categorical)return;if(!i.categorical.categories||!i.categorical.values)return;this.dataView=i;const a=i.categorical.categories,n=a[0];this.formattingSettings=this.formattingSettingsService.populateFormattingSettingsModel(s.S,t.dataViews[0]),this.svg.setAttribute("width",t.viewport.width.toString()),this.svg.setAttribute("height",t.viewport.height.toString());const l=a[0].values,o=i.categorical.values,r=this.formattingSettings.xAxisSettings.show.value,d=this.formattingSettings.xAxisSettings.axisColor.value.value,c=this.formattingSettings.xAxisSettings.fontSize.value,u=this.formattingSettings.xAxisSettings.fontFamily.value.value.toString(),g=this.formattingSettings.yAxisSettings.show.value,h=this.formattingSettings.yAxisSettings.axisColor.value.value,p=this.formattingSettings.yAxisSettings.fontSize.value,m=this.formattingSettings.yAxisSettings.fontFamily.value.value.toString(),v=this.formattingSettings.yAxisSettings.displayUnits.value.value.toString(),f=this.formattingSettings.yAxisSettings.precision.value,S=this.formattingSettings.gridSettings.showHorizontal.value,y=this.formattingSettings.gridSettings.showVertical.value,b=this.formattingSettings.gridSettings.gridColor.value.value,N=this.formattingSettings.gridSettings.gridThickness.value,A=this.formattingSettings.gridSettings.gridStyle.value.value.toString(),w=this.formattingSettings.legend.show.value,x=this.formattingSettings.legend.position.value.value.toString(),C=this.formattingSettings.legend.fontColor.value.value,M=this.formattingSettings.legend.fontSize.value,z=this.formattingSettings.legend.fontFamily.value.value.toString(),D=t.viewport.width,E=t.viewport.height;let L=0;!w||"Top"!==x&&"TopCenter"!==x?!w||"Bottom"!==x&&"BottomCenter"!==x?(this.margin.top=20,this.margin.bottom=40):(L=30,this.margin.bottom=40+L):(L=30,this.margin.top=20+L),a.length>2&&(this.margin.bottom+=25);const F=D-this.margin.left-this.margin.right,B=E-this.margin.top-this.margin.bottom,k=t=>B-(t-U)/(j-U)*B;let I=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY;o.forEach(t=>{t.values.forEach(t=>{const e=Number(t);isNaN(e)||(e>I&&(I=e),e<T&&(T=e))})}),isFinite(I)||(I=0),isFinite(T)||(T=0);const P=Math.max(Math.abs(I),Math.abs(T)),G=this.getNiceStep(P);let U=Math.floor(T/G)*G,j=Math.ceil(I/G)*G;for(U===j&&(U=0),(j-U)/G>10&&(j=U+10*G),this.mainGroup.setAttribute("transform",`translate(${this.margin.left}, ${this.margin.top})`);this.axisGroup.firstChild;)this.axisGroup.removeChild(this.axisGroup.firstChild);for(;this.linesGroup.firstChild;)this.linesGroup.removeChild(this.linesGroup.firstChild);if(this.svg.querySelectorAll(".custom-marker").forEach(t=>t.remove()),this.svg.querySelectorAll(".custom-datalabel").forEach(t=>t.remove()),this.svg.querySelectorAll(".custom-hover").forEach(t=>t.remove()),this.svg.querySelectorAll(".legend").forEach(t=>t.remove()),g)for(let t=U;t<=j;t+=G){const i=B-(t-U)/(j-U)*B;if(S){const t=document.createElementNS(e,"line");t.setAttribute("x1","0"),t.setAttribute("x2",F.toString()),t.setAttribute("y1",i.toString()),t.setAttribute("y2",i.toString()),t.setAttribute("stroke",b),t.setAttribute("stroke-width",N.toString()),"dashed"===A&&t.setAttribute("stroke-dasharray","4,4"),this.axisGroup.appendChild(t)}const s=document.createElementNS(e,"text");s.setAttribute("x","-10"),s.setAttribute("y",i.toString()),s.setAttribute("text-anchor","end"),s.setAttribute("alignment-baseline","middle"),s.textContent=this.formatYAxisValue(t,v,f),s.setAttribute("fill",h),s.setAttribute("font-size",p.toString()),s.setAttribute("font-family",m),this.axisGroup.appendChild(s)}if(r){const t=Math.ceil(l.length/10);l.forEach((i,s)=>{if(s%t!==0&&s!==l.length-1)return;const o=s/(l.length-1)*F;if(y){const t=document.createElementNS(e,"line");t.setAttribute("x1",o.toString()),t.setAttribute("x2",o.toString()),t.setAttribute("y1","0"),t.setAttribute("y2",B.toString()),t.setAttribute("stroke",b),t.setAttribute("stroke-width",N.toString()),"dashed"===A&&t.setAttribute("stroke-dasharray","4,4"),this.axisGroup.appendChild(t)}const r=document.createElementNS(e,"text");if(r.setAttribute("x",o.toString()),r.setAttribute("y",(B+20).toString()),s===l.length-1?r.setAttribute("text-anchor","end"):0===s?r.setAttribute("text-anchor","start"):r.setAttribute("text-anchor","middle"),r.setAttribute("fill",d),r.setAttribute("font-size",c.toString()),r.setAttribute("font-family",u),r.setAttribute("cursor","pointer"),r.addEventListener("contextmenu",t=>{const e=this.host.createSelectionIdBuilder().withCategory(n,s).createSelectionId();this.selectionManager.showContextMenu(e,{x:t.clientX,y:t.clientY}),t.preventDefault(),t.stopPropagation()}),r.addEventListener("click",t=>{const e=this.host.createSelectionIdBuilder().withCategory(n,s).createSelectionId();this.selectionManager.select(e,t.ctrlKey||t.metaKey),t.stopPropagation()}),a.length>1){const t=a[0].values[s].toString(),i=a[a.length-1].values[s].toString(),n=document.createElementNS(e,"tspan");if(n.textContent=t,n.setAttribute("x",o.toString()),n.setAttribute("dy","0em"),r.appendChild(n),a.length>2){const t=a[a.length-2].values[s].toString(),n=document.createElementNS(e,"tspan");n.textContent=t,n.setAttribute("x",o.toString()),n.setAttribute("dy","1.2em"),r.appendChild(n);const l=document.createElementNS(e,"tspan");l.textContent=i,l.setAttribute("x",o.toString()),l.setAttribute("dy","1.2em"),r.appendChild(l)}else{const t=document.createElementNS(e,"tspan");t.textContent=i,t.setAttribute("x",o.toString()),t.setAttribute("dy","1.2em"),r.appendChild(t)}}else r.textContent=this.formatDate(l[s].toString());this.axisGroup.appendChild(r)})}const K=[],V=this.formattingSettings.dataLabels.show.value,$=this.formattingSettings.dataLabels.color.value.value,R=this.formattingSettings.dataLabels.fontSize.value,O=this.formattingSettings.dataLabels.fontFamily.value.value.toString(),Y=parseInt(this.formattingSettings.dataLabels.displayUnits.value.value.toString()),q=this.formattingSettings.dataLabels.precision.value;if(o.forEach((t,i)=>{if(i>=10)return;const s=t.source.displayName,o=t.values,r=this.formattingSettings[`lineSettings${i+1}`],d=this.formattingSettings[`gradientSettings${i+1}`];if(!r||!d)return;const c=r.lineColor.value.value,u=r.strokeWidth.value,g=r.lineStyle.value.value.toString(),h=r.showMarkers.value,p=r.markerSize.value,m=r.stepped.value,v=d.showGradient.value,f=d.gradientColor.value.value,S=d.gradientIntensity.value,y=d.gradientDirection.value.value.toString();K.push({name:s,color:c});const b=l.map((t,e)=>[e/(l.length-1)*F,k(Number(o[e]))]);if(b.length<2)return;const N=`gradient_${i}_${Date.now()}`;let A=document.createElementNS(e,"linearGradient");A.setAttribute("id",N);const w=document.createElementNS(e,"stop");w.setAttribute("offset","0%"),w.setAttribute("stop-color",f),w.setAttribute("stop-opacity",Math.max(0,Math.min(1,S)).toString());const x=document.createElementNS(e,"stop");x.setAttribute("offset","100%"),x.setAttribute("stop-color",f),x.setAttribute("stop-opacity","0"),A.appendChild(w),A.appendChild(x),this.svg.querySelector("defs")?.appendChild(A),this.applyGradientDirection(A,y);let C=m?this.buildSteppedPath(b):this.buildSmoothPath(b);const M=document.createElementNS(e,"path"),z=k(0),D=`${C} L ${b[b.length-1][0]},${z} L ${b[0][0]},${z} Z`;M.setAttribute("d",D),M.setAttribute("fill",v?`url(#${N})`:"none"),M.setAttribute("stroke","none"),this.linesGroup.appendChild(M);const E=document.createElementNS(e,"path");E.setAttribute("d",C),E.setAttribute("fill","none"),E.setAttribute("stroke",c),E.setAttribute("stroke-width",u.toString()),E.setAttribute("stroke-linecap","round"),E.setAttribute("stroke-linejoin","round"),"dashed"===g?E.setAttribute("stroke-dasharray","8,4"):"dotted"===g&&E.setAttribute("stroke-dasharray","2,2"),this.linesGroup.appendChild(E),h&&b.forEach(t=>{const i=document.createElementNS(e,"circle");i.classList.add("custom-marker"),i.setAttribute("cx",(this.margin.left+t[0]).toString()),i.setAttribute("cy",(this.margin.top+t[1]).toString()),i.setAttribute("r",p.toString()),i.setAttribute("fill",c),this.svg.appendChild(i)}),V&&b.forEach((t,i)=>{const s=Number(o[i]),a=this.formatDataLabel(s,Y,q),n=document.createElementNS(e,"text");n.classList.add("custom-datalabel"),n.setAttribute("x",(this.margin.left+t[0]).toString()),n.setAttribute("y",(this.margin.top+t[1]-10).toString()),n.setAttribute("text-anchor","middle"),n.setAttribute("fill",$),n.setAttribute("font-size",R.toString()),n.setAttribute("font-family",O),n.setAttribute("font-weight","500"),n.textContent=a,this.svg.appendChild(n)}),b.forEach((t,i)=>{const r=this.host.createSelectionIdBuilder().withCategory(n,i).createSelectionId(),d=document.createElementNS(e,"circle");d.classList.add("custom-hover"),d.setAttribute("cx",(this.margin.left+t[0]).toString()),d.setAttribute("cy",(this.margin.top+t[1]).toString()),d.setAttribute("r","8"),d.setAttribute("fill","transparent"),d.setAttribute("cursor","pointer"),d.addEventListener("mouseenter",n=>{let r="";r=a.length>1?a.map(t=>t.values[i].toString()).join(" "):this.formatDate(l[i].toString());const d=`<div><strong>${r}</strong></div><div>${s}: ${this.formatNumber(Number(o[i]))}</div>`;this.showTooltip(n.pageX,n.pageY,d);const u=document.createElementNS(e,"circle");u.classList.add("temp-marker"),u.setAttribute("cx",(this.margin.left+t[0]).toString()),u.setAttribute("cy",(this.margin.top+t[1]).toString()),u.setAttribute("r","5"),u.setAttribute("fill",c),u.setAttribute("stroke","#fff"),u.setAttribute("stroke-width","2"),this.svg.appendChild(u)}),d.addEventListener("mousemove",t=>{this.tooltip.style.left=t.pageX+10+"px",this.tooltip.style.top=t.pageY-10+"px"}),d.addEventListener("mouseleave",()=>{this.hideTooltip(),this.svg.querySelectorAll(".temp-marker").forEach(t=>t.remove())}),d.addEventListener("click",t=>{this.selectionManager.select(r,t.ctrlKey||t.metaKey),t.stopPropagation()}),d.addEventListener("contextmenu",t=>{this.selectionManager.showContextMenu(r,{x:t.clientX,y:t.clientY}),t.preventDefault(),t.stopPropagation()}),this.svg.appendChild(d)})}),w&&K.length>0){const t=document.createElementNS(e,"g");t.classList.add("legend");let s=0,a=0;const n=100,l=20;"Top"===x||"TopCenter"===x?(s=(D-K.length*n)/2,a=10):"Bottom"===x||"BottomCenter"===x?(s=(D-K.length*n)/2,a=E-20):"Left"===x?(s=10,a=E/2-K.length*l/2):"Right"===x&&(s=D-110,a=E/2-K.length*l/2),K.forEach((r,d)=>{const c=x.includes("Center")||"Top"===x||"Bottom"===x?s+d*n:s,u="Left"===x||"Right"===x?a+d*l:a,g=document.createElementNS(e,"g");g.setAttribute("cursor","pointer");const h=document.createElementNS(e,"rect");h.setAttribute("x",c.toString()),h.setAttribute("y",u.toString()),h.setAttribute("width","15"),h.setAttribute("height","3"),h.setAttribute("fill",r.color),g.appendChild(h);const p=document.createElementNS(e,"text");p.setAttribute("x",(c+20).toString()),p.setAttribute("y",(u+2).toString()),p.setAttribute("alignment-baseline","middle"),p.setAttribute("fill",C),p.setAttribute("font-size",M.toString()),p.setAttribute("font-family",z),p.textContent=r.name,g.appendChild(p);const m=document.createElementNS(e,"rect");m.setAttribute("x",c.toString()),m.setAttribute("y",(u-5).toString()),m.setAttribute("width","90"),m.setAttribute("height","15"),m.setAttribute("fill","transparent"),g.appendChild(m),g.addEventListener("contextmenu",t=>{const e=o.grouped()[0].values[d];if(e&&e.identity){const s=this.host.createSelectionIdBuilder().withSeries(i.categorical.values,e).createSelectionId();this.selectionManager.showContextMenu(s,{x:t.clientX,y:t.clientY})}t.preventDefault(),t.stopPropagation()}),g.addEventListener("click",t=>{const e=o.grouped()[0].values[d];if(e&&e.identity){const s=this.host.createSelectionIdBuilder().withSeries(i.categorical.values,e).createSelectionId();this.selectionManager.select(s,t.ctrlKey||t.metaKey)}t.stopPropagation()}),t.appendChild(g)}),this.svg.appendChild(t)}}formatDataLabel(t,e,i){let s=t,a="";return 0===e?Math.abs(t)>=1e9?(s=t/1e9,a=" Mds"):Math.abs(t)>=1e6?(s=t/1e6,a=" M"):Math.abs(t)>=1e3&&(s=t/1e3,a=" K"):1e3===e?(s=t/1e3,a=" K"):1e6===e?(s=t/1e6,a=" M"):1e9===e&&(s=t/1e9,a=" Mds"),s.toFixed(i)+a}buildSmoothPath(t){if(0===t.length)return"";let e=`M ${t[0][0]},${t[0][1]}`;for(let i=1;i<t.length;i++)e+=` L ${t[i][0]},${t[i][1]}`;return e}buildSteppedPath(t){if(0===t.length)return"";let e=`M ${t[0][0]},${t[0][1]}`;for(let i=1;i<t.length;i++)e+=` L ${t[i][0]},${t[i-1][1]} L ${t[i][0]},${t[i][1]}`;return e}getFormattingModel(){let t=1;this.dataView&&this.dataView.categorical&&this.dataView.categorical.values&&(t=this.dataView.categorical.values.length);const e=[];for(let i=1;i<=t;i++)e.push(this.formattingSettings[`lineSettings${i}`]),e.push(this.formattingSettings[`gradientSettings${i}`]);return e.push(this.formattingSettings.xAxisSettings,this.formattingSettings.yAxisSettings,this.formattingSettings.gridSettings,this.formattingSettings.dataLabels,this.formattingSettings.legend),this.formattingSettingsService.buildFormattingModel({cards:e})}applyGradientDirection(t,e){switch(e){case"vertical":t.setAttribute("x1","0"),t.setAttribute("y1","0"),t.setAttribute("x2","0"),t.setAttribute("y2","1");break;case"vertical-reverse":t.setAttribute("x1","0"),t.setAttribute("y1","1"),t.setAttribute("x2","0"),t.setAttribute("y2","0");break;case"horizontal":t.setAttribute("x1","0"),t.setAttribute("y1","0"),t.setAttribute("x2","1"),t.setAttribute("y2","0");break;case"horizontal-reverse":t.setAttribute("x1","1"),t.setAttribute("y1","0"),t.setAttribute("x2","0"),t.setAttribute("y2","0");break;case"diagonal":t.setAttribute("x1","0"),t.setAttribute("y1","0"),t.setAttribute("x2","1"),t.setAttribute("y2","1");break;case"diagonal-reverse":t.setAttribute("x1","1"),t.setAttribute("y1","0"),t.setAttribute("x2","0"),t.setAttribute("y2","1")}}formatNumber(t){if(0===t)return"0";const e=Math.abs(t);if(e>=1e3)return Math.round(t).toLocaleString("fr-FR");if(e>=1)return(Math.round(100*t)/100).toLocaleString("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:2});const i=Math.floor(Math.log10(e)),s=Math.min(4,Math.abs(i)+1);return t.toLocaleString("fr-FR",{minimumFractionDigits:s,maximumFractionDigits:s})}formatYAxisValue(t,e,i){let s=t,a="";const n=parseInt(e);return 0===n?Math.abs(t)>=1e9?(s=t/1e9,a=" Mds"):Math.abs(t)>=1e6?(s=t/1e6,a=" M"):Math.abs(t)>=1e3&&(s=t/1e3,a=" K"):1e3===n?(s=t/1e3,a=" K"):1e6===n?(s=t/1e6,a=" M"):1e9===n&&(s=t/1e9,a=" Mds"),0===i?Math.round(s).toLocaleString("fr-FR")+a:s.toLocaleString("fr-FR",{minimumFractionDigits:i,maximumFractionDigits:i})+a}formatDate(t){return t.toString()}}},639:(t,e,i)=>{function s(t,e){return{objectName:t,propertyName:e.name,selector:e.selector,altConstantValueSelector:e.altConstantSelector,instanceKind:e.instanceKind}}function a(t,e,i){return null==e||"object"==typeof e&&!e.solid?i:e.solid?{value:null==e?void 0:e.solid.color}:(null==t?void 0:t.items)?t.items.find(t=>t.value==e):e}i.d(e,{D:()=>a,y:()=>s})},667:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(754);const a=class{constructor(t){this.localizationManager=t}populateFormattingSettingsModel(t,e){var i,a;let n=new t,l=null===(i=null==e?void 0:e.metadata)||void 0===i?void 0:i.objects;return l&&(null===(a=n.cards)||void 0===a||a.forEach(t=>{var e;t instanceof s.St&&(null===(e=t.topLevelSlice)||void 0===e||e.setPropertiesValues(l,t.name)),(t instanceof s.Tn?[t]:t.groups).forEach(e=>{var i,s,a,n;null===(i=e.topLevelSlice)||void 0===i||i.setPropertiesValues(l,t.name),null===(s=null==e?void 0:e.slices)||void 0===s||s.forEach(e=>{null==e||e.setPropertiesValues(l,t.name)}),null===(n=null===(a=null==e?void 0:e.container)||void 0===a?void 0:a.containerItems)||void 0===n||n.forEach(e=>{var i;null===(i=null==e?void 0:e.slices)||void 0===i||i.forEach(e=>{null==e||e.setPropertiesValues(l,t.name)})})})})),n}buildFormattingModel(t){let e={cards:[]};return t.cards.filter(({visible:t=!0})=>t).forEach(t=>{var i;let a={displayName:this.localizationManager&&t.displayNameKey?this.localizationManager.getDisplayName(t.displayNameKey):t.displayName,description:this.localizationManager&&t.descriptionKey?this.localizationManager.getDisplayName(t.descriptionKey):t.description,groups:[],uid:t.name+"-card",analyticsPane:t.analyticsPane};const n=t.name;if(t.topLevelSlice){let e=t.topLevelSlice.getFormattingSlice(n,this.localizationManager);e.suppressDisplayName=!0,a.topLevelToggle=e}null===(i=t.onPreProcess)||void 0===i||i.call(t);const l=t instanceof s.Tn;(l?[t].filter(({visible:t=!0})=>t):t.groups.filter(({visible:t=!0})=>t)).forEach(t=>{const e=t.name+"-group",i={displayName:l?void 0:this.localizationManager&&t.displayNameKey?this.localizationManager.getDisplayName(t.displayNameKey):t.displayName,description:l?void 0:this.localizationManager&&t.descriptionKey?this.localizationManager.getDisplayName(t.descriptionKey):t.description,slices:[],uid:e,collapsible:t.collapsible,delaySaveSlices:t.delaySaveSlices,disabled:t.disabled,disabledReason:t.disabledReason};a.groups.push(i);const s={};if(t.container){const a=t.container,l=e+"-container",o={displayName:this.localizationManager&&a.displayNameKey?this.localizationManager.getDisplayName(a.displayNameKey):a.displayName,description:this.localizationManager&&a.descriptionKey?this.localizationManager.getDisplayName(a.descriptionKey):a.description,containerItems:[],uid:l};a.containerItems.forEach(t=>{const e=t.displayNameKey?t.displayNameKey:t.displayName,i=l+e;let a={displayName:this.localizationManager&&t.displayNameKey?this.localizationManager.getDisplayName(t.displayNameKey):t.displayName,slices:[],uid:i};this.buildFormattingSlices({slices:t.slices,objectName:n,sliceNames:s,formattingSlices:a.slices}),o.containerItems.push(a)}),i.container=o}if(t.slices){if(t.topLevelSlice){let e=t.topLevelSlice.getFormattingSlice(n,this.localizationManager);e.suppressDisplayName=!0,(null==i.displayName?a:i).topLevelToggle=e}this.buildFormattingSlices({slices:t.slices,objectName:n,sliceNames:s,formattingSlices:i.slices})}}),a.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(t),e.cards.push(a)}),e}buildFormattingSlices({slices:t,objectName:e,sliceNames:i,formattingSlices:s}){null==t||t.filter(({visible:t=!0})=>t).forEach(t=>{let a=null==t?void 0:t.getFormattingSlice(e,this.localizationManager);a&&(void 0===i[t.name]?i[t.name]=0:(i[t.name]++,a.uid=`${a.uid}-${i[t.name]}`),s.push(a))})}getRevertToDefaultDescriptor(t){var e;const i={};let a,n=[],l=[];return t instanceof s.St&&t.topLevelSlice&&n.push(...null===(e=t.topLevelSlice)||void 0===e?void 0:e.getRevertToDefaultDescriptor(t.name)),(t instanceof s.Tn?[t].filter(({visible:t=!0})=>t):t.groups.filter(({visible:t=!0})=>t)).forEach(e=>{var s,o;a=this.getSlicesRevertToDefaultDescriptor(t.name,e.slices,i,e.topLevelSlice),null===(o=null===(s=e.container)||void 0===s?void 0:s.containerItems)||void 0===o||o.forEach(e=>{l=l.concat(this.getSlicesRevertToDefaultDescriptor(t.name,e.slices,i))}),n.push(...a.concat(l))}),n}getSlicesRevertToDefaultDescriptor(t,e,i,s){let a=[];return s&&(i[s.name]=!0,a=a.concat(s.getRevertToDefaultDescriptor(t))),null==e||e.forEach(e=>{e&&!i[e.name]&&(i[e.name]=!0,a=a.concat(e.getRevertToDefaultDescriptor(t)))}),a}}},674:(t,e,i)=>{i.d(e,{O:()=>a.A,z:()=>s});var s=i(754),a=i(667)},754:(t,e,i)=>{i.d(e,{Kx:()=>l,PA:()=>h,St:()=>o,Tn:()=>r,iB:()=>g,jF:()=>c,ks:()=>p,sk:()=>u});var s=i(639);class a{}class n extends a{}class l{}class o extends a{}class r extends n{}class d extends a{constructor(t){super(),Object.assign(this,t)}getFormattingSlice(t,e){const i=this.type,s=this.name,a={displayName:e&&this.displayNameKey?e.getDisplayName(this.displayNameKey):this.displayName,description:e&&this.descriptionKey?e.getDisplayName(this.descriptionKey):this.description,uid:t+"-"+s};return Object.assign(Object.assign({},a),{control:{type:i,properties:this.getFormattingComponent(t,e)}})}getFormattingComponent(t,e){return{descriptor:s.y(t,this),value:this.value}}getRevertToDefaultDescriptor(t){return[{objectName:t,propertyName:this.name}]}setPropertiesValues(t,e){var i;let a=null===(i=null==t?void 0:t[e])||void 0===i?void 0:i[this.name];this.value=s.D(this,a,this.value)}}class c extends d{constructor(t){super(t),this.type="ToggleSwitch"}}class u extends d{constructor(t){super(t),this.type="ColorPicker"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{defaultColor:this.defaultColor,isNoFillItemSupported:this.isNoFillItemSupported})}}class g extends d{constructor(t){super(t),this.type="NumUpDown"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{options:this.options})}}class h extends d{constructor(t){super(t),this.type="Dropdown"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{items:this.items})}}class p extends d{constructor(t){super(t),this.type="TextInput"}getFormattingComponent(t){return Object.assign(Object.assign({},super.getFormattingComponent(t)),{placeholder:this.placeholder})}}}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};(()=>{i.r(s),i.d(s,{default:()=>n});var t=i(279),e=window.powerbi,a={name:"courbedegrade0E5B94303DBB4B71884B9B500B8496FB",displayName:"courbedegrade",class:"Visual",apiVersion:"5.3.0",create:e=>{if(t.b)return new t.b(e);throw"Visual instance not found"},createModalDialog:(t,e,i)=>{const s=globalThis.dialogRegistry;t in s&&new s[t](e,i)},custom:!0};void 0!==e&&(e.visuals=e.visuals||{},e.visuals.plugins=e.visuals.plugins||{},e.visuals.plugins.courbedegrade0E5B94303DBB4B71884B9B500B8496FB=a);const n=a})(),courbedegrade0E5B94303DBB4B71884B9B500B8496FB=s})();